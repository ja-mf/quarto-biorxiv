% Additional packages for bioRxiv template
\usepackage{lipsum}

% SI units setup
\sisetup{range-units = single,
        separate-uncertainty = true,
        multi-part-units = single,
        range-phrase = --}

% Fix for authblk with Quarto
\makeatletter
\renewcommand\Authands{, and }
\makeatother

% Footer customization options
% logo: "biorxiv" (default) shows bioRxiv logo, any other string shows that text, false hides it
% date: true (default) shows \today, a string shows that text, false hides it
\makeatletter
\newcommand{\@footerlogocontent}{\includegraphics[width=1cm, trim=0 1.5cm 0 0]{bioRxiv_logo}}
\newcommand{\@footerdatecontent}{\today}
\newif\ifshowlogo
\newif\ifshowdate
\showlogotrue
\showdatetrue

% Commands to set footer content from template
\newcommand{\setfooterlogo}[1]{\renewcommand{\@footerlogocontent}{#1}}
\newcommand{\setfooterdate}[1]{\renewcommand{\@footerdatecontent}{#1}}
\newcommand{\hidefooterlogo}{\showlogofalse}
\newcommand{\hidefooterdate}{\showdatefalse}
\makeatother

% Override footer definitions to use customizable content
\makeatletter
\AtBeginDocument{%
  % Redefine footer macros with conditional logo and date
  \def\@footerlogo{\ifshowlogo\@footerlogocontent\hspace{7pt}|\hspace{7pt}\fi}%
  \def\@footerdate{\ifshowdate\@footerdatecontent\hspace{7pt}|\hspace{7pt}\fi}%
  %
  % First page footer (right side)
  \if@submit
    \def\aBioRXiv{{\footnotesize
      \footerfont \@leadauthor\ifnum \value{authors} > 2\hspace{2pt}\textit{et al.}\fi\hspace{7pt}|\hspace{7pt}\@footerdate\thepage\textendash\pageref{LastPage}
    }}
  \else
    \def\aBioRXiv{{\footnotesize
      \footerfont \@leadauthor\ifnum \value{authors} > 2\hspace{2pt}\textit{et al.}\fi\hspace{7pt}|\hspace{7pt}\@footerlogo\@footerdate\thepage\textendash\pageref{LastPage}
    }}
  \fi
  %
  % Subsequent pages footer (right side, non-first pages)
  \if@submit
    \rfoot[\dAuthor]{{\footnotesize
      \footerfont \@footerdate\thepage\textendash\pageref{LastPage}
    }}
  \else
    \rfoot[\dAuthor]{{\footnotesize
      \footerfont \@footerlogo\@footerdate\thepage\textendash\pageref{LastPage}
    }}
  \fi
}
\makeatother

% Abstract spanning environment for two-column mode
\makeatletter
\newenvironment{abstractspan}{%
  \if@tmptwocolumn
    \twocolumn[\@maketitle
    \vspace{1em}
    \noindent{\sffamily\bfseries\large Abstract}\par\vspace{0.5em}
    \noindent\small
  \else
    \@maketitle
    \vspace{1em}
    \noindent{\sffamily\bfseries\large Abstract}\par\vspace{0.5em}
    \noindent\small
  \fi
}{%
  \if@tmptwocolumn
    \vspace{1em}]
  \else
    \vspace{1em}\par
  \fi
}

\newenvironment{authorsummaryspan}{%
  \vspace{0.5em}
  \noindent{\sffamily\bfseries\large Author Summary}\par\vspace{0.5em}
  \noindent\small
}{%
  \vspace{1em}\par
}
\makeatother
